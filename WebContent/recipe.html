<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Recept administration</title>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="jquery-3.3.1.js"></script>
<script src="Agent.js"></script>
<script>
$(function(){
    loadRecipes();
    $( "#createRecipe" ).click(function() {
    	createRecipe();
	});
})
function loadRecipes() {
	Agent.getJson("rest/recipe",
		function(data) {
			$.each(data, function (i, element) {
				$("#shownRecipe").append(generateRecipeHTML(element));
			});
		}
	);
}
//Convenience function for generating html
function generateRecipeHTML(recipe) {
	return 	'<tr><td>' + recipe.recipeID + '</td>' +
			'<td>' + recipe.recipeName + '</td>' + 
			'<td> <button id="showButton' + recipe.recipeID + '">Vis</button></td>'
			'</tr>';
}
function createRecipe() {
   	var recipeData = {}
   	recipeData.recipeID = $("#recipeID").val();
   	recipeData.recipeNavn = $("#recipeName").val();
   	Agent.postJson('rest/recipe', recipeData, function(data){
			$("#shownRecipes").append(generateRecipeHTML(recipeData));
		}, function(xhr, statusmsg, errormsg) {
			alert(xhr);
			alert(statusmsg);
			alert(errormsg);
		});
   	loadRecipes();
}
</script>
<body>
	<div id="menu">
		<b>Menu</b><br>
		<a href="index.html">Log ud</a>
	</div>

		<h2>Recept administration</h2>
			<input type="text" id="recipeID" placeholder="Recept ID">
			<input type="text" id="recipeName" placeholder="Recept navn">
		<br>
		<button id="createRecipe">Tilføj råvare</button>
	<div class="container" id="recepter">
		<h2>Recepter</h2>
		<table>
			<thead>
				<tr>
					<td>ID<td/>
					<td>Navn<td/>
					<td>hmm<td/>
				<tr/>
			<thead/>
			<tbody id="shownRecipes">
			
			</tbody>
		</table>
		</div>
</body>
</html>